RewriteEngine On

# Detect the base directory automatically if possible, or assume root/subfolder based on request
# But for simplicity and robustness in XAMPP vs Production, let's use a standard pattern:

# 1. Clean Room URLs: /room/CODE -> game.php?room=CODE
RewriteRule ^room/([A-Za-z0-9]+)/?$ game.php?room=$1 [QSA,L]

# 2. Admin URLs
RewriteRule ^admin/?$ admin/index.php [L]
RewriteRule ^admin/words/?$ admin/words.php [L]
RewriteRule ^admin/avatars/?$ admin/avatars.php [L]
RewriteRule ^admin/music/?$ admin/music.php [L]

# 3. Handle index.php cleaning (Optional but good for SEO)
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /.*index\.php\ HTTP/
RewriteRule ^(.*)index\.php$ $1 [R=301,L]

# 4. Fallback for non-existent files to index.php (Enables SPA-like routing)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php [L]
